<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tarot Arcana Explorer</title>
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />
  </head>
  <body class="m-0 p-0 overflow-hidden bg-[#0a0e1a]">
    <div id="map" style="width: 100vw; height: 100vh"></div>

    <div id="map" style="width: 100vw; height: 100vh"></div>

    <!-- Walk panel -->
    <div
      id="walk-panel"
      class="fixed bottom-0 left-0 right-0 z-[1000] transform translate-y-full transition-transform duration-300 ease-out data-[open=true]:translate-y-0 md:top-0 md:left-0 md:bottom-0 md:w-[460px] md:translate-y-0 md:-translate-x-full md:data-[open=true]:translate-x-0 flex flex-col pointer-events-none"
    >
      <div
        class="bg-[#0d1117]/95 backdrop-blur-md border-t border-amber-900/30 md:border-t-0 md:border-r max-h-[70vh] md:max-h-full md:h-full flex flex-col p-6 text-gray-200 pointer-events-auto"
      >
        <button
          id="walk-close"
          class="absolute top-3 right-3 z-10 text-gray-500 hover:text-amber-200 text-xl cursor-pointer bg-[#0d1117]/50 rounded-full w-8 h-8 flex items-center justify-center hover:bg-[#0d1117]"
        >
          âœ•
        </button>
        <div id="walk-content" class="flex-grow overflow-y-auto pr-2 mt-4">
          <!-- Populated by JS -->
        </div>
        <div class="mt-4 pt-4 border-t border-amber-900/30 flex justify-between">
          <button id="walk-prev" class="px-4 py-2 bg-amber-900/40 text-amber-200 rounded hover:bg-amber-800/60 disabled:opacity-50 disabled:cursor-not-allowed">
            &larr; Previous
          </button>
          <button id="walk-next" class="px-4 py-2 bg-amber-900/40 text-amber-200 rounded hover:bg-amber-800/60 disabled:opacity-50 disabled:cursor-not-allowed">
            Next &rarr;
          </button>
        </div>
      </div>
    </div>

    <!-- Controls panel -->
    <div id="controls-panel" class="fixed top-4 right-4 z-[1000] flex gap-3 bg-[#0a0e1a]/90 rounded-lg border border-amber-900/50 p-2 backdrop-blur-sm shadow-lg">
      <div class="flex items-center gap-2">
        <label for="map-select" class="text-amber-500 text-xs font-semibold uppercase tracking-wider pl-1">Map:</label>
        <select
          id="map-select"
          class="bg-transparent text-amber-200 pr-2 py-1 rounded outline-none border-none text-sm cursor-pointer hover:text-white transition-colors [&>option]:bg-[#0d1117] [&>option]:text-amber-200"
        >
          <!-- Map options injected by JS -->
        </select>
      </div>
      <div class="w-[1px] bg-amber-900/50 my-1"></div>
      <div class="flex items-center gap-2">
        <label for="walk-select" class="text-amber-500 text-xs font-semibold uppercase tracking-wider pl-1">Walk:</label>
        <select
          id="walk-select"
          class="bg-transparent text-amber-200 pr-2 py-1 rounded outline-none border-none text-sm cursor-pointer hover:text-white transition-colors [&>option]:bg-[#0d1117] [&>option]:text-amber-200"
        >
          <option value="">ðŸ§­ Select a Walk...</option>
        </select>
      </div>
    </div>

    <!-- Link Legend -->
    <div
      id="link-legend"
      class="fixed top-4 left-4 z-[1000] bg-[#0a0e1a]/90 rounded-lg border border-amber-900/50 p-3 text-sm backdrop-blur-sm shadow-lg transition-transform duration-300 ease-out data-[walk-open=true]:-translate-x-[150%] md:data-[walk-open=true]:translate-x-[460px]"
    >
      <h3 class="text-amber-200 font-semibold mb-2 text-xs uppercase tracking-wider">Active Links</h3>
      <div class="flex flex-col gap-2">
        <label class="flex items-center gap-2 cursor-pointer text-gray-300 hover:text-white transition-colors">
          <input type="checkbox" value="journey" checked class="accent-[#ffd764] w-4 h-4 cursor-pointer" />
          <span class="w-3 h-[2px] bg-[#ffd764] rounded-full inline-block"></span> Fool's Journey
        </label>
        <label class="flex items-center gap-2 cursor-pointer text-gray-300 hover:text-white transition-colors">
          <input type="checkbox" value="suit" checked class="accent-[#888] w-4 h-4 cursor-pointer" />
          <span class="w-3 h-[2px] bg-[#888] rounded-full inline-block"></span> Suit Progression
        </label>
        <label class="flex items-center gap-2 cursor-pointer text-gray-300 hover:text-white transition-colors">
          <input type="checkbox" value="numeric" checked class="accent-[#666] w-4 h-4 cursor-pointer" />
          <span class="w-3 h-[2px] border-b-2 border-dashed border-[#666] inline-block"></span> Numeric
        </label>
        <label class="flex items-center gap-2 cursor-pointer text-gray-300 hover:text-white transition-colors">
          <input type="checkbox" value="thematic" checked class="accent-[#a0522d] w-4 h-4 cursor-pointer" />
          <span class="w-3 h-[2px] border-b-2 border-dotted border-[#a0522d] inline-block"></span> Thematic
        </label>
      </div>
    </div>

    <!-- Detail panel -->
    <div
      id="detail-panel"
      class="fixed bottom-0 left-0 right-0 z-[1000] transform translate-y-full transition-transform duration-300 ease-out data-[open=true]:translate-y-0 md:top-0 md:right-0 md:left-auto md:bottom-0 md:w-[540px] md:translate-y-0 md:translate-x-full md:data-[open=true]:translate-x-0"
    >
      <div
        class="bg-[#0d1117]/95 backdrop-blur-md border-t border-amber-900/30 md:border-t-0 md:border-l max-h-[70vh] md:max-h-full md:h-full flex flex-col p-6 text-gray-200"
      >
        <button
          id="detail-close"
          class="absolute top-3 right-3 z-10 text-gray-500 hover:text-amber-200 text-xl cursor-pointer bg-[#0d1117]/50 rounded-full w-8 h-8 flex items-center justify-center hover:bg-[#0d1117]"
        >
          âœ•
        </button>
        <div id="detail-content" class="flex-grow overflow-y-auto pr-2 mt-4 pb-12 relative"></div>
      </div>
    </div>

    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
